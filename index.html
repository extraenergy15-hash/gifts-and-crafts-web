<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Artisana 2026 | Premium Sustainable Gifting</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Playfair+Display:ital,wght@0,500;0,600;0,700;1,500&display=swap" rel="stylesheet">
    
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.3.0/model-viewer.min.js"></script>

    <style>
        /* --- Premium CSS Variables --- */
        :root {
            --neo-mint: #A8E6CF;
            --deep-teal: #004d54; 
            --earthy-clay: #d16b4e; 
            --unbleached-linen: #F7EFE5; 
            --radius-large: 20px;
            --shadow-premium: 0 10px 40px -10px rgba(0, 77, 84, 0.12);
            --glass-bg: rgba(255, 255, 255, 0.85); 
            --glass-border: 1px solid rgba(255, 255, 255, 0.9);
            
            --font-ui: 'Inter', sans-serif;
            --font-head: 'Playfair Display', serif;
        }

        /* --- Reset & Base Styles --- */
        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }

        body {
            font-family: var(--font-ui);
            background: linear-gradient(135deg, var(--unbleached-linen) 0%, #ffffff 100%);
            color: var(--deep-teal);
            padding-bottom: 100px;
            overflow-x: hidden;
            line-height: 1.6;
            min-height: 100vh;
        }

        h1, h2, h3 { font-family: var(--font-head); font-weight: 600; line-height: 1.2; color: var(--deep-teal); }

        /* --- Utility Classes --- */
        .glass-panel {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: var(--radius-large);
            border: var(--glass-border);
            box-shadow: var(--shadow-premium);
            padding: 2rem; 
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .glass-panel:hover { transform: translateY(-2px); box-shadow: 0 15px 50px -15px rgba(0, 77, 84, 0.15); }

        .btn {
            font-family: var(--font-ui);
            font-weight: 500; font-size: 0.95rem; border: none; border-radius: var(--radius-large);
            padding: 1rem 1.5rem; cursor: pointer; transition: all 0.2s ease;
            display: inline-flex; justify-content: center; align-items: center; gap: 8px;
        }
        .btn:active { transform: scale(0.98); }
        
        .primary-btn { background-color: var(--earthy-clay); color: #fff; width: 100%; box-shadow: 0 4px 15px rgba(209, 107, 78, 0.2); }
        .primary-btn:hover { background-color: #bd5c40; }
        .secondary-btn { background-color: transparent; color: var(--deep-teal); border: 1px solid var(--deep-teal); width: 100%; }
        .secondary-btn:hover { background-color: rgba(0, 77, 84, 0.05); }

        /* --- Header --- */
        header { padding: 3rem 1.5rem 1.5rem; max-width: 800px; margin: 0 auto; }
        header h1 { font-size: 2.5rem; letter-spacing: -0.5px; margin-bottom: 0.5rem; }
        header p { font-size: 1.1rem; opacity: 0.7; font-weight: 300; }

        /* --- Bento Grid Layout --- */
        .bento-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem; padding: 0 1.5rem 2rem; max-width: 800px; margin: 0 auto;
        }
        .span-2 { grid-column: 1 / -1; }

        /* --- Occasion Vault (Horizontal Scroll) --- */
        .vault-container { display: flex; gap: 1rem; overflow-x: auto; padding-bottom: 0.5rem; scrollbar-width: none; }
        .vault-container::-webkit-scrollbar { display: none; }
        .vault-item {
            min-width: 140px; padding: 1rem; background: rgba(0, 77, 84, 0.04);
            border-radius: 12px; border: 1px solid rgba(0, 77, 84, 0.08); cursor: pointer;
            transition: background 0.2s;
        }
        .vault-item:hover { background: rgba(0, 77, 84, 0.08); }
        .vault-date { font-size: 0.75rem; color: var(--earthy-clay); font-weight: 600; margin-bottom: 4px; display: block; }
        .vault-title { font-size: 0.9rem; font-weight: 500; }

        /* --- WebAR Product Card Details --- */
        .product-meta { margin-bottom: 1.5rem; }
        .product-meta h2 { font-size: 1.8rem; margin-bottom: 0.2rem; }
        .product-meta p { font-size: 0.9rem; opacity: 0.6; font-weight: 500; text-transform: uppercase; letter-spacing: 1px; }

        .ar-container {
            width: 100%; height: 300px; border-radius: 12px; overflow: hidden;
            margin-bottom: 1.5rem; background-color: #f9f9f9; border: 1px solid rgba(0,0,0,0.05); position: relative;
        }
        model-viewer { width: 100%; height: 100%; }
        .ar-badge {
            position: absolute; top: 15px; left: 15px; background: rgba(255,255,255,0.9);
            padding: 4px 10px; border-radius: 20px; font-size: 0.75rem; font-weight: 600;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05); z-index: 10;
        }
        
        /* --- Toggles (Crowd-Gift & Flex-Gift) --- */
        .toggle-container, .checkbox-container {
            display: flex; justify-content: space-between; align-items: center;
            margin: 1rem 0; font-size: 0.95rem; padding: 1rem;
            background: rgba(0, 77, 84, 0.03); border-radius: 12px; border: 1px solid rgba(0,0,0,0.03);
        }
        .checkbox-container { align-items: flex-start; justify-content: flex-start; gap: 12px; cursor: pointer; }
        .checkbox-container input[type="checkbox"] {
            margin-top: 4px; width: 18px; height: 18px; accent-color: var(--earthy-clay); cursor: pointer;
        }
        .switch { position: relative; display: inline-block; width: 44px; height: 24px; flex-shrink: 0; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider {
            position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0;
            background-color: #cbd5d1; transition: .3s; border-radius: 34px;
        }
        .slider:before {
            position: absolute; content: ""; height: 18px; width: 18px; left: 3px; bottom: 3px;
            background-color: white; transition: .3s; border-radius: 50%; box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        input:checked + .slider { background-color: var(--earthy-clay); }
        input:checked + .slider:before { transform: translateX(20px); }

        .progress-container { width: 100%; background-color: rgba(0,0,0,0.05); border-radius: 10px; height: 6px; margin-top: 12px; overflow: hidden; }
        .progress-bar { height: 100%; background-color: var(--earthy-clay); transition: width 0.6s cubic-bezier(0.22, 1, 0.36, 1); }

        /* --- Sustainability Tracker Accordion --- */
        .accordion { margin-top: 1.5rem; border-top: 1px solid rgba(0,0,0,0.05); }
        .accordion-btn {
            background: transparent; color: var(--deep-teal); cursor: pointer; padding: 1.2rem 0; width: 100%;
            text-align: left; border: none; font-family: var(--font-ui); font-weight: 500; font-size: 1rem;
            display: flex; justify-content: space-between; align-items: center;
        }
        .accordion-panel { padding: 0 0 1.2rem 0; display: none; font-size: 0.9rem; color: rgba(0, 77, 84, 0.8); }
        .passport-item { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px dashed rgba(0,0,0,0.1); }
        .passport-item:last-child { border-bottom: none; }
        .passport-data { font-family: monospace; color: var(--earthy-clay); font-weight: 600;}

        /* --- Green Route Tracker --- */
        .route-path {
            position: relative; height: 4px; background: #e0e0e0; border-radius: 2px; margin: 2rem 0 1rem; display: flex; justify-content: space-between;
        }
        .route-fill {
            position: absolute; top: 0; left: 0; height: 100%; background: var(--neo-mint); border-radius: 2px; width: 65%; transition: width 1s ease;
        }
        .route-node {
            width: 12px; height: 12px; background: #fff; border: 2px solid #e0e0e0; border-radius: 50%; position: relative; top: -4px; z-index: 2;
        }
        .route-node.active { border-color: var(--neo-mint); background: var(--deep-teal); }
        .route-vehicle {
            position: absolute; top: -25px; left: 65%; transform: translateX(-50%);
            font-size: 1.2rem; text-shadow: 0 2px 4px rgba(0,0,0,0.1); transition: left 1s ease;
        }

        /* --- Memory-Link Video Recorder --- */
        .video-placeholder {
            width: 100%; height: 180px; background: rgba(0, 77, 84, 0.02); border: 1px solid rgba(0, 77, 84, 0.1);
            border-radius: 12px; display: flex; align-items: center; justify-content: center; margin-bottom: 1.5rem; font-size: 0.9rem; color: rgba(0, 77, 84, 0.5);
        }

        /* --- GiftGenie AI Widget --- */
        .fab {
            position: fixed; bottom: 95px; right: 25px; width: 56px; height: 56px; border-radius: 50%;
            background: var(--deep-teal); color: #fff; display: flex; align-items: center; justify-content: center;
            font-size: 1.5rem; box-shadow: 0 10px 25px rgba(0, 77, 84, 0.3); cursor: pointer; z-index: 1001; transition: transform 0.3s ease;
        }
        .fab:hover { transform: scale(1.05); }
        .chat-widget {
            position: fixed; bottom: 165px; right: 25px; width: calc(100% - 50px); max-width: 380px; height: 400px;
            display: none; flex-direction: column; z-index: 1002; padding: 0; overflow: hidden; background: rgba(255, 255, 255, 0.95);
        }
        .chat-header { font-family: var(--font-head); padding: 1.2rem; background: var(--deep-teal); color: #fff; font-size: 1.1rem; font-weight: 600; }
        .chat-body { flex-grow: 1; padding: 1.2rem; overflow-y: auto; font-size: 0.9rem; display: flex; flex-direction: column; gap: 12px; }
        .msg { padding: 10px 14px; border-radius: 12px; max-width: 85%; line-height: 1.4; }
        .msg.ai { background: rgba(168, 230, 207, 0.3); align-self: flex-start; border-bottom-left-radius: 4px; }
        .msg.user { background: rgba(0, 77, 84, 0.05); align-self: flex-end; border-bottom-right-radius: 4px; }
        .chat-input { display: flex; padding: 1rem; border-top: 1px solid rgba(0,0,0,0.05); background: #fff; }
        .chat-input input { flex-grow: 1; border: 1px solid rgba(0,0,0,0.1); border-radius: 20px; padding: 10px 15px; background: #f9f9f9; outline: none; transition: border 0.2s; }
        .chat-input input:focus { border-color: var(--neo-mint); }
        .chat-input button { background: var(--deep-teal); color: white; border: none; border-radius: 50%; width: 40px; height: 40px; margin-left: 10px; cursor: pointer; }

        /* --- Fixed Bottom Navigation (Thumb Zone) --- */
        .bottom-nav {
            position: fixed; bottom: 0; left: 0; width: 100%; height: 80px; background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); border-top: 1px solid rgba(0,0,0,0.05);
            display: flex; justify-content: space-around; align-items: center; z-index: 1000; padding-bottom: env(safe-area-inset-bottom); box-shadow: 0 -5px 20px rgba(0,0,0,0.02);
        }
        .nav-item { display: flex; flex-direction: column; align-items: center; color: var(--deep-teal); text-decoration: none; font-size: 0.7rem; font-weight: 500; opacity: 0.4; transition: all 0.2s; }
        .nav-item.active, .nav-item:hover { opacity: 1; transform: translateY(-2px); }
        .nav-icon { font-size: 1.4rem; margin-bottom: 4px; }
    </style>
</head>
<body>

    <header>
        <h1>Artisana</h1>
        <p>Curated. Sustainable. Meaningful.</p>
    </header>

    <main class="bento-grid">

        <div class="bento-item glass-panel span-2" style="padding: 1.5rem;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                <h3 style="font-size: 1.2rem;">Occasion Vault</h3>
                <span style="font-size: 0.75rem; color: var(--earthy-clay); font-weight: 600; background: rgba(209, 107, 78, 0.1); padding: 4px 8px; border-radius: 12px;">AI Concierge Active ‚ú®</span>
            </div>
            <div class="vault-container">
                <div class="vault-item" onclick="openChat('Suggest gifts for Mom\'s Birthday')">
                    <span class="vault-date">IN 12 DAYS</span>
                    <span class="vault-title">Mom's Birthday</span>
                </div>
                <div class="vault-item" onclick="openChat('Suggest gifts for 5th Anniversary')">
                    <span class="vault-date">OCT 14</span>
                    <span class="vault-title">5th Anniversary</span>
                </div>
                <div class="vault-item" style="border-style: dashed; background: transparent; text-align: center; color: rgba(0,77,84,0.6);" onclick="openChat('I want to add a new occasion')">
                    <span class="vault-date" style="color: inherit;">+ ADD NEW</span>
                    <span class="vault-title">Log Event</span>
                </div>
            </div>
        </div>
        
        <div class="bento-item glass-panel span-2">
            
            <div class="product-meta">
                <p>Studio Kin, Kyoto</p>
                <h2>Hand-Glazed Matcha Bowl</h2>
            </div>
            
            <div class="ar-container">
                <div class="ar-badge">AR Ready</div>
                <model-viewer src="https://modelviewer.dev/shared-assets/models/Astronaut.glb" ios-src="https://modelviewer.dev/shared-assets/models/Astronaut.usdz" alt="3D model" ar auto-rotate camera-controls shadow-intensity="1" environment-image="neutral">
                    <button slot="ar-button" class="btn secondary-btn" style="position: absolute; bottom: 15px; left: 50%; transform: translateX(-50%); width: calc(100% - 30px); background: rgba(255,255,255,0.9); backdrop-filter: blur(4px);">
                        View in Your Space
                    </button>
                </model-viewer>
            </div>

            <div class="toggle-container">
                <div>
                    <strong style="display: block;">Enable Crowd-Gifting</strong>
                    <span style="font-size: 0.8rem; opacity: 0.7;">Split the cost with friends</span>
                </div>
                <label class="switch">
                    <input type="checkbox" id="crowd-toggle">
                    <span class="slider"></span>
                </label>
            </div>

            <label class="checkbox-container">
                <input type="checkbox" id="flex-gift-toggle">
                <div>
                    <strong style="display: block; color: var(--deep-teal);">Enable Flex-Gift‚Ñ¢ (Pre-Shipment Swap)</strong>
                    <span style="font-size: 0.8rem; opacity: 0.7;">Recipient can discreetly confirm or swap colors via SMS before dispatch. Eliminates return CO2.</span>
                </div>
            </label>

            <div id="action-container">
                <button class="btn primary-btn">Purchase ‚Äî $120.00</button>
            </div>

            <div class="accordion">
                <button class="accordion-btn">Digital Passport <span style="font-size: 1.2rem; font-weight: 300;">+</span></button>
                <div class="accordion-panel">
                    <div class="passport-item"><span>Artisan</span><strong>Yumi Tanaka, Kyoto</strong></div>
                    <div class="passport-item"><span>Footprint</span><strong>1.2kg CO2e (Offset)</strong></div>
                    <div class="passport-item"><span>Ledger ID</span><span class="passport-data">0x8F3a...9bC2</span></div>
                    <p style="margin-top: 12px; color: #2e7d32; font-size: 0.8rem; display: flex; align-items: center; gap: 5px;">
                        ‚úì Verifiable Sustainable Materials
                    </p>
                </div>
            </div>
        </div>

        <div class="bento-item glass-panel span-2">
            <h3 style="margin-bottom: 0.2rem; font-size: 1.4rem;">Order #892A ‚Äî In Transit</h3>
            <p style="font-size: 0.85rem; opacity: 0.7;">Last-Mile Green Route Tracker</p>
            
            <div class="route-path">
                <div class="route-fill"></div>
                <div class="route-vehicle">üö≤</div>
                <div class="route-node active"></div>
                <div class="route-node active"></div>
                <div class="route-node active"></div>
                <div class="route-node"></div>
            </div>
            
            <div style="background: rgba(168, 230, 207, 0.2); padding: 1rem; border-radius: 12px; font-size: 0.85rem;">
                <strong style="display: block; color: #2e7d32; margin-bottom: 4px;">üåø Eco-Delivery Active</strong>
                Your package was consolidated and is currently on an e-cargo bike out for neighborhood delivery. 
                <br><strong>Saved vs. Standard: 4.5kg CO2e</strong>
            </div>
        </div>

        <div class="bento-item glass-panel span-2">
            <h3 style="margin-bottom: 0.5rem; font-size: 1.4rem;">Add a Memory-Link</h3>
            <p style="font-size: 0.9rem; margin-bottom: 1.5rem; opacity: 0.8;">Record a personal video message. It will be attached to a QR code inside the physical gift box.</p>
            <div class="video-placeholder" id="video-feed"><span>Camera feed inactive</span></div>
            <button class="btn secondary-btn" id="record-btn">Tap to Record Message</button>
        </div>

    </main>

    <div class="fab" id="fab-btn">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path><path d="M8 10h.01"></path><path d="M12 10h.01"></path><path d="M16 10h.01"></path></svg>
    </div>
    
    <div class="glass-panel chat-widget" id="chat-widget">
        <div class="chat-header">GiftGenie AI Assistant</div>
        <div class="chat-body" id="chat-body">
            <div class="msg ai">Welcome. Tell me a bit about who you're buying for today. Or select an occasion from your vault!</div>
        </div>
        <div class="chat-input">
            <input type="text" id="chat-input-field" placeholder="Ask GiftGenie...">
            <button id="chat-send">‚Üë</button>
        </div>
    </div>

    <nav class="bottom-nav">
        <a href="#" class="nav-item active"><span class="nav-icon">‚åÇ</span><span>Home</span></a>
        <a href="#" class="nav-item"><span class="nav-icon">‚ö≤</span><span>Discover</span></a>
        <a href="#" class="nav-item"><span class="nav-icon">üõí</span><span>Cart</span></a>
        <a href="#" class="nav-item"><span class="nav-icon">üë§</span><span>Profile</span></a>
    </nav>

    <script>
        // --- Crowd-Gift Toggle Logic ---
        const crowdToggle = document.getElementById('crowd-toggle');
        const flexToggle = document.getElementById('flex-gift-toggle');
        const actionContainer = document.getElementById('action-container');

        function updateActionState() {
            if (crowdToggle.checked) {
                actionContainer.innerHTML = `
                    <div style="margin-top: 15px;">
                        <div style="display: flex; justify-content: space-between; font-size: 0.9rem; font-weight: 600;">
                            <span>$45 Raised</span><span style="opacity: 0.5;">Goal: $120</span>
                        </div>
                        <div class="progress-container"><div class="progress-bar" style="width: 37%;"></div></div>
                        <button class="btn primary-btn" style="margin-top: 15px;">Contribute to Fund</button>
                    </div>`;
            } else {
                let btnText = flexToggle.checked ? "Setup Flex-Gift ‚Äî $120.00" : "Purchase ‚Äî $120.00";
                actionContainer.innerHTML = `<button class="btn primary-btn">${btnText}</button>`;
            }
        }
        
        crowdToggle.addEventListener('change', updateActionState);
        flexToggle.addEventListener('change', updateActionState);

        // --- Sustainability Accordion Logic ---
        const accBtn = document.querySelector('.accordion-btn');
        const accPanel = document.querySelector('.accordion-panel');
        accBtn.addEventListener('click', () => {
            const isBlock = accPanel.style.display === 'block';
            accPanel.style.display = isBlock ? 'none' : 'block';
            accBtn.innerHTML = `Digital Passport <span style="font-size: 1.2rem; font-weight: 300;">${isBlock ? '+' : '-'}</span>`;
        });

        // --- Memory-Link Recording Mockup ---
        const recordBtn = document.getElementById('record-btn');
        const videoFeed = document.getElementById('video-feed');
        recordBtn.addEventListener('click', () => {
            if (recordBtn.dataset.recording === "true") return;
            recordBtn.dataset.recording = "true";
            recordBtn.innerText = "Recording... (Please wait 3s)";
            recordBtn.style.backgroundColor = "var(--earthy-clay)";
            recordBtn.style.color = "white"; recordBtn.style.border = "none";
            videoFeed.innerHTML = "<span style='color: var(--earthy-clay); font-weight: 500;'>‚óè Recording Active</span>";
            videoFeed.style.border = "1px solid var(--earthy-clay)";
            setTimeout(() => {
                videoFeed.innerHTML = "<span style='color: var(--deep-teal);'>‚úì Video Encrypted & Saved</span>";
                videoFeed.style.border = "1px solid var(--neo-mint)";
                recordBtn.innerText = "Video Attached";
                recordBtn.style.backgroundColor = "var(--neo-mint)";
                recordBtn.style.color = "var(--deep-teal)"; recordBtn.disabled = true;
            }, 3000);
        });

        // --- GiftGenie AI Chat Logic ---
        const fabBtn = document.getElementById('fab-btn');
        const chatWidget = document.getElementById('chat-widget');
        const chatSend = document.getElementById('chat-send');
        const chatInput = document.getElementById('chat-input-field');
        const chatBody = document.getElementById('chat-body');

        function toggleChat() {
            const isHidden = window.getComputedStyle(chatWidget).display === 'none';
            chatWidget.style.display = isHidden ? 'flex' : 'none';
            if(isHidden) chatInput.focus();
        }
        fabBtn.addEventListener('click', toggleChat);

        function handleChat(forcedText = null) {
            const val = forcedText || chatInput.value.trim();
            if (!val) return;
            
            if (forcedText && window.getComputedStyle(chatWidget).display === 'none') {
                toggleChat();
            }

            const userMsg = document.createElement('div');
            userMsg.className = 'msg user'; userMsg.innerText = val;
            chatBody.appendChild(userMsg); chatInput.value = ''; chatBody.scrollTop = chatBody.scrollHeight;

            setTimeout(() => {
                const aiMsg = document.createElement('div');
                aiMsg.className = 'msg ai';
                aiMsg.innerText = `Analyzing intent for "${val}"... Let me pull up some tailored sustainable recommendations from the vault.`;
                chatBody.appendChild(aiMsg); chatBody.scrollTop = chatBody.scrollHeight;
            }, 1000);
        }

        chatSend.addEventListener('click', () => handleChat());
        chatInput.addEventListener('keypress', (e) => { if (e.key === 'Enter') handleChat(); });

        // Global function for the Vault items to interact with the Chat
        window.openChat = function(query) {
            handleChat(query);
        }
    </script>
</body>
</html>
